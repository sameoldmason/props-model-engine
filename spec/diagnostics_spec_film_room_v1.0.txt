# diagnostics_spec_film_room_v1.0.md

## 1. Purpose

Film Room mode is a **diagnostic tool** for past bets, not a pick generator.

Goals:
- Review props that were actually played.
- Decide if the read was **good**, **bad**, or **mixed**.
- Identify which model modules were responsible (good or bad).
- Suggest **specific**, **actionable** model tweaks (or confirm that no change is needed).

No forward-looking bets or leans are allowed in this mode.

---

## 2. Scope and Limits

Film Room only works on **completed games** and **confirmed bets**.

It does **not**:
- make new picks
- suggest new bets
- change unit size or bankroll rules
- use vibes, narratives, or astrology
- use memory from other days or chats

It only:
- diagnoses what happened
- attributes success or failure to model logic
- proposes structured model improvements

---

## 3. Required Input Per Prop

For each prop that is being diagnosed, the input must include:

- player name
- team / opponent
- market (e.g., Points, Rebounds, Assists, PRA, etc.)
- line (e.g., 22.5)
- side (Over or Under)
- odds and stake (optional but preferred)
- final stat result for that market
- a short game context summary, if available:
  - minutes played
  - foul trouble (yes/no, when it happened)
  - injuries (to the player or key teammates)
  - blowout stretches
  - foul environment (whistles tight/normal/swallowing)
  - any obvious role or rotation changes

If any of these are missing, diagnostics can still run, but with more **uncertainty** and softer conclusions.

---

## 4. Data Rules

1. Use only information that is:
   - about the game in question, and
   - reliably inferable from the provided context or the final box score.

2. Do **not**:
   - invent injuries
   - invent blowouts or foul trouble
   - invent rotations or schemes
   - assume what the original “reasoning” was if it is not stated

3. It is allowed to:
   - infer simple, logical things (e.g., “He had 5 fouls in 22 minutes, so foul trouble was clearly an issue.”)
   - infer rotation risk if minutes are far from normal and context supports it.

4. Do not pull in:
   - unrelated historical trends
   - separate day’s model runs
   - other chat memories

Film Room lives entirely inside:
- the original model spec (v5.4),
- the risk framework,
- and the specific game + bet context.

---

## 5. Analysis Pipeline

Film Room diagnostics follow a simple, repeatable pipeline for **each** prop.

### Step 1 — Rebuild the Pre-Game Model View

Using the **model_core_spec_v5.4**, rebuild what the model should have seen **before tip-off**:

- Projected minutes (normal, up, or down).
- Volume expectations:
  - shot volume (StrongVolume / WeakVolume)
  - assist volume
  - rebound volume
- Matchup view:
  - advantage / neutral / disadvantage
  - key defensive traits (rim protection, switching, help, etc.)
- Archetype fit:
  - how the player’s archetype should interact with the defense
- Regression check:
  - was the player heater-inflated or due for regression?
- Role compression / expansion:
  - any key teammates in/out that should shift usage or role
- Blowout risk:
  - low / medium / high
- Home/road evidence:
  - any meaningful split

This is the **“intended read”** based on the current model rules, not what the user emotionally felt.

### Step 2 — Describe What Actually Happened

Create a short, structured explanation of the game:

- minutes actually played vs expected
- actual shot volume vs expected
- actual efficiency vs expected (normal, cold, heater)
- actual FT volume vs expected
- actual assist and rebound volume vs expected
- real matchup behavior:
  - did the defense force away from his primary method?
  - did the scheme look tougher or softer than projected?
- role behavior:
  - did teammates unexpectedly take over?
  - did the player become more of a facilitator or spot-up player?
- random events:
  - early fouls
  - minor injuries
  - strange substitutions
  - overtime
  - garbage time

The goal is to separate:
- **normal variance** vs
- **model blind spots**.

### Step 3 — Outcome Classification

Each prop gets one of:

1. **Good Read – Unlucky Result**
   - Model logic was sound.
   - Minutes, volume, and role were close to expectations.
   - Matchup read made sense.
   - The miss is mostly due to:
     - shooting variance
     - one-off foul trouble
     - random events or flukes.

2. **Bad Read – Model Error**
   - Model clearly misread:
     - volume,
     - matchup,
     - role,
     - blowout risk,
     - or a hard rule.
   - There was a predictable factor the model ignored or underweighted.

3. **Mixed Case**
   - Some parts of the read were strong.
   - Others were flawed.
   - Example: minutes were right, volume was right, but the matchup was misjudged.

This classification should be **honest**, not protective.  
If the read was bad, call it bad.

### Step 4 — Module Attribution

For each prop, mark modules as **Correct**, **MinorIssue**, or **MajorIssue**.

Modules:

- P0 – Projection Engine
- Module 1 – Pre-Filters
- Module 2 – Volume Chain
- Module 3 – Matchup Engine
- Module 4 – Archetype Matrix
- Module 5 – Regression / Heater
- Module 6 – Role Compression
- Module 7 – Blowout Logic
- Module 8 – Home/Road Evidence
- Module 9 – Hard Rules
- Module 10 – Final Projection Blending
- Module 11 – Confidence Scoring
- Module 12 – Output Rules

Example:

- Volume Chain: MajorIssue (expected StrongVolume, actual minutes and usage were low).
- Matchup Engine: Correct (defense behaved as expected).
- Blowout Logic: MinorIssue (blowout risk slightly underweighted).
- Hard Rules: Correct.

### Step 5 — Suggested Model Actions

For each prop, suggest **tweaks** in three levels:

1. **No Change**
   - The prop was a good process, bad result.
   - Log it, but do not alter the model.

2. **Soft Candidate**
   - Flag a pattern that might be added as a rule later.
   - Needs more examples before becoming a real rule.
   - Example: “Flag high foul-rate guards attacking this big as a soft risk for FT_Sensitive players.”

3. **Strong Candidate / Immediate Fix**
   - Clear, repeated mistake.
   - Very likely needs a rule or a change to an existing threshold.
   - Example: “Add a hard rule not to make LOCK overs on scorers whose minutes have trended down 3+ games in a row without clear explanation.”

Film Room should **prefer**:
- “No change” or “Soft candidate” unless there is strong evidence.

---

## 6. Output Format (Recommended JSON)

For each prop, diagnostics should return something shaped like:

```json
{
  "bet": {
    "player": "Name",
    "team": "TEAM",
    "opponent": "OPP",
    "market": "Points",
    "line": 22.5,
    "side": "Over",
    "final_result": 19
  },
  "classification": "BadRead_ModelError",
  "summary": "Model overestimated minutes and shot volume in a low-usage role.",
  "modules": [
    { "name": "P0", "status": "MinorIssue" },
    { "name": "VolumeChain", "status": "MajorIssue" },
    { "name": "MatchupEngine", "status": "Correct" },
    { "name": "RoleCompression", "status": "MajorIssue" }
  ],
  "key_factors": [
    "Player played 26 minutes instead of expected 34.",
    "Teammate returned and took primary on-ball reps.",
    "Defense did not force ball out of his hands; usage was just lower."
  ],
  "suggested_actions": [
    {
      "severity": "SoftCandidate",
      "description": "Tighten role compression rules when a high-usage teammate returns from injury."
    }
  ]
}
```

For multiple props, return an array:

```json
{
  "diagnostics": [ { ... }, { ... }, { ... } ]
}
```

---

## 7. Multi-Prop Behavior

When given multiple props:

- Analyze each prop independently.
- Then add a short **session summary**:
  - counts of Good / Bad / Mixed
  - recurring module issues (e.g., Volume Chain repeatedly off)
  - early patterns that future dev you should watch

Example:

- 2 Good Reads – Unlucky
- 1 Bad Read – Model Error
- Common Issue: Role Compression underweighting returning teammates.

This summary is **for model adjustment**, not for emotional grading.

---

## 8. Safety and Behavior Rules

Film Room mode must:

- Never suggest new bets.
- Never adjust unit size.
- Never say a future pick is a LOCK or HIGH.
- Never use narrative-only explanations.
- Never blame “the universe” or luck without pointing to clear variance like:
  - extreme shooting variance
  - rare foul patterns
  - injuries
  - garbage time

It should:
- Use clear, simple language.
- Keep focus on **process over outcome**.
- Be blunt but constructive:
  - call out real mistakes,
  - protect against overreacting to one loss,
  - suggest changes only when there is enough evidence.

Film Room is your **coach and debugger**, not a hype man.
